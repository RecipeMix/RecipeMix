<!DOCTYPE html>
<html lang="en"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <body data-spy="scroll" data-target=".bs-docs-sidebar">
    <ui:composition>
            
        <!-- NAVBAR
          ================================================== -->
          <div class="container navbar-wrapper">
            <div class="navbar navbar-inverse">
              <div class="navbar-inner">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </a>
                <h:link class="brand" outcome="home">RecipeMix</h:link>
                <div class="nav-collapse collapse">
                  <ul class="nav">
                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Recipes <b class="caret"></b></a>
                      <ul class="dropdown-menu">
                        <li><h:link value="Create A Recipe" outcome="recipe.create" /></li>
                        <li><h:link value="Favorite Recipes" outcome="favorites.view" /></li>
                        <li><h:link value="My Recipes" outcome="myrecipes.view" /></li>
                        <li class="divider"></li>
                        <li>
                            <h:link value="All Recipes" outcome="recipes.view">
                                <f:param name="by" value="all" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Main Courses" outcome="recipes.view">
                                <f:param name="by" value="maincourses" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Side Dishes" outcome="recipes.view">
                                <f:param name="by" value="sidedishes" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Beverages" outcome="recipes.view">
                                <f:param name="by" value="beverages" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Appetizers" outcome="recipes.view">
                                <f:param name="by" value="appetizers" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Desserts" outcome="recipes.view">
                                <f:param name="by" value="desserts" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Lunch" outcome="recipes.view">
                                <f:param name="by" value="lunch" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Dinner" outcome="recipes.view">
                                <f:param name="by" value="dinner" />
                            </h:link>
                        </li>
                      </ul>
                    </li>
                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Groups <b class="caret"></b></a>
                      <ul class="dropdown-menu">
                        <li><h:link value="Create A Group" outcome="group.create" /></li>
                        <li class="divider"></li>
                        <li>
                            <h:link value="All Groups" outcome="groups.view">
                                <f:param name="by" value="all" />
                            </h:link>
                        </li>
                        <li>
                            <h:link value="Your Groups" outcome="mygroups.manage">
                                <f:param name="by" value="all" />
                            </h:link>
                        </li>
                      </ul>
                    </li>
                  </ul>
                                    
                <h:form prependId="false"
                        styleClass="navbar-form pull-right"
                        onsubmit="document.getElementById('loginForm').action = 'j_security_check';">
                    
                    <p:inputText id="j_username" styleClass="span2" />
                    <p:watermark for="j_username" value="Username" />
                    <p:password id="j_password" styleClass="span2" />
                    <p:watermark for="j_password" value="Password" />

                    <div class="btn-group">
                        <p:commandButton id="login-btn"
                                         ajax="false"
                                         styleClass="btn btn-primary"
                                         value="Sign In" />
                        <p:commandButton id="register-btn"
                                         styleClass="btn btn-info"
                                         value="Register"
                                         onclick="$('#myModal').modal();" />
                    </div>
                </h:form>
                </div><!--d/.nav-collapse -->
              </div><!-- /.navbar-inner -->        
            </div><!-- /.navbar -->
          </div><!-- /.container -->
          
        <div id="myModal" class="modal hide fade"
             tabindex="-1" role="dialog"
             aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h3 id="myModalLabel">Join RecipeMix today!</h3>
          </div>
          <div class="modal-body">
              <h:form class="form-horizontal" id="registration-form">
                  
                <div class="control-group">
                    <label class="control-label" for="username">Username</label>
                    <div class="controls">
                        <p:inputText id="username"
                                     value="#{registration.newUser.userName}" />
                        <p:watermark for="username"
                                     value="Username" />
                    </div>
                </div>
                  
                <div class="control-group">
                    <label class="control-label" for="firstName">First Name</label>
                    <div class="controls">
                        <p:inputText id="firstName"
                                     value="#{registration.newUser.firstName}" />
                        <p:watermark for="firstName"
                                     value="First Name" />
                    </div>
                </div>
                  
                <div class="control-group">
                    <label class="control-label" for="lastName">Last Name</label>
                    <div class="controls">
                        <p:inputText id="lastName"
                                     value="#{registration.newUser.lastName}" />
                        <p:watermark for="lastName"
                                     value="Last Name" />
                    </div>
                </div>
                  
                <div class="control-group">
                    <label class="control-label" for="email">Email</label>
                    <div class="controls">
                        <p:inputText id="email"
                                     value="#{registration.newUser.email}" />
                        <p:watermark for="email"
                                     value="example@example.com" />     
                    </div>
                </div>
                                        
                <div class="control-group">
                  <label class="control-label" for="password">Password</label>
                  <div class="controls">
                    <p:password  id="password"
                                 autocomplete="off"
                                 value="#{registration.newUser.password}"
                                 title="Password" />
                    <p:watermark for="password"
                                 value="Password" />   
                  </div>
                </div>
                  
                <div class="control-group">
                  <label class="control-label" for="passwordConfirm">Confirm Password</label>
                  <div class="controls">
                    <p:password  id="confirmPassword"
                                 autocomplete="off"
                                 value="#{registration.newUser.password}"
                                 title="Confirm Password" />
                    <p:watermark for="confirmPassword"
                                 value="Confirm Password" />  
                  </div>
                </div>
                  
                <p:commandButton styleClass="btn btn-primary pull-right"
                                 value="Create Account"
                                 actionListener="#{registration.registerUser}"
                                 onclick="clearForm();"/>  
              </h:form>
          </div><!-- /.modal-body -->
        </div><!-- ./myModal -->

        <div class="container" id="search-container">
            <div class="row">
                <h:form styleClass="navbar-search pull-right">
                    <p:inputText id="searchInput" styleClass="search-query" />
                    <p:watermark for="searchInput" value="Search for recipes, tags, groups..." />
                    <p:commandButton value="Search"
                                     styleClass="btn btn-primary"
                                     onclick="naviSearch();" />
                </h:form>
            </div><!-- /.row -->
        </div><!-- /.container -->
            
        <script type="text/javascript">
            $ = jQuery;

            //Add Hover effect to menus
            $('ul.nav li.dropdown').hover(function() {
              $(this).find('.dropdown-menu').stop(true, true).fadeIn();
            }, function() {
              $(this).find('.dropdown-menu').stop(true, true).fadeOut();
            });

            // Initialize dropdown toggle
            $('.dropdown-toggle').dropdown();
            
            function clearForm() {
                $(this).closest('registration-form').find("input[type=text], textarea").val("");
            }

            // Pass forn values into arguments for the seach page
            function naviSearch() {
                var submittedInputValue = $('#search\\:searchInput').val();
                window.location.href = "/faces/search.xhtml?searchArg=" + submittedInputValue;
            }
        </script>
            
    </ui:composition>
    </body>
</html>